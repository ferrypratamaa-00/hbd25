<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Ulang Tahun, Sayang!</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Canvas Confetti CDN for effects -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    
    <style>
        /* Custom styles */
        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden; /* Prevent scrolling during transitions */
        }
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        /* Glassmorphism effect for cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        /* Animation for fade-in effect */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Make video fit container */
        #camera-feed {
            transform: scaleX(-1); /* Mirror effect for selfie cam */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-rose-200 via-fuchsia-200 to-indigo-300">

    <!-- Main Container -->
    <div id="app" class="w-full h-screen overflow-y-auto no-scrollbar snap-y snap-mandatory">

        <!-- ===== SECTION 1: PEMBUKA ===== -->
        <section id="pembuka" class="h-screen w-full flex flex-col justify-center items-center p-4 text-center snap-center">
            <div class="glass-card p-8 md:p-12 shadow-xl">
                <h1 class="font-pacifico text-4xl md:text-6xl text-rose-800 drop-shadow-lg">Hai Cantik!</h1>
                <p class="mt-4 text-lg text-slate-700">Aku punya sesuatu buat kamu...</p>
                <button onclick="showSection('surat')" class="mt-8 bg-white text-rose-600 font-bold py-3 px-8 rounded-full shadow-lg hover:scale-110 transition-transform duration-300 animate-pulse">
                    Klik Di Sini
                </button>
            </div>
        </section>

        <!-- ===== SECTION 2: SURAT CINTA ===== -->
        <section id="surat" class="hidden h-screen w-full flex-col justify-center items-center p-4 snap-center">
            <div class="glass-card w-full max-w-lg p-6 md:p-8 shadow-xl fade-in">
                <h2 class="font-pacifico text-3xl md:text-4xl text-center text-rose-800 mb-4">Selamat Ulang Tahun!</h2>
                <!-- GANTI NAMA PACAR KAMU DI BAWAH INI -->
                <p class="text-slate-700 text-left leading-relaxed">
                    Untuk Endah Putri Yuniar,
                    <br><br>
                    Hari ini adalah hari yang spesial, karena ini adalah hari lahirnya orang yang paling spesial di hidup aku. Setiap hari bersamamu terasa seperti sebuah anugerah. Tawamu adalah musik terindah, dan senyummu adalah pemandangan favoritku.
                    <br><br>
                    Aku mungkin bukan orang yang paling puitis, tapi aku mau kamu tahu kalau kamu itu segalanya buat aku. Terima kasih sudah hadir dan mewarnai hari-hariku.
                    <br><br>
                    Aku harap di usiamu yang baru ini, kamu semakin bahagia, sehat selalu, dan semua impianmu tercapai. Aku akan selalu ada di sini untuk mendukungmu.
                </p>
                <div class="text-center mt-8">
                    <button onclick="showSection('galeri')" class="bg-rose-500 text-white font-bold py-2 px-6 rounded-full shadow-md hover:bg-rose-600 transition-colors">
                        Lanjut yuk &rarr;
                    </button>
                </div>
            </div>
        </section>

        <!-- ===== SECTION 3: GALERI KENANGAN ===== -->
        <section id="galeri" class="hidden h-screen w-full flex-col justify-center items-center p-4 snap-center">
             <div class="glass-card w-full max-w-lg p-6 md:p-8 shadow-xl fade-in text-center">
                <h2 class="font-pacifico text-3xl md:text-4xl text-rose-800 mb-6">Beberapa Alasan Aku Sayang Kamu</h2>
                <div class="space-y-4 text-left">
                    <!-- GANTI ALASAN-ALASAN DI BAWAH INI -->
                    <div class="bg-white/50 p-4 rounded-lg shadow">💕 Karena senyummu menenangkan.</div>
                    <div class="bg-white/50 p-4 rounded-lg shadow">😂 Karena selera humor kita nyambung (walau kadang garing).</div>
                    <div class="bg-white/50 p-4 rounded-lg shadow">🤔 Karena kamu selalu bisa ngertiin aku.</div>
                    <div class="bg-white/50 p-4 rounded-lg shadow">✨ Karena kamu membuatku jadi versi terbaik dari diriku.</div>
                    <div class="bg-white/50 p-4 rounded-lg shadow">❤️ Karena kamu bisa tau apa yang aku butuh.</div>
                    <div class="bg-white/50 p-4 rounded-lg shadow">😊 Karena itu kamu, Endah Putri Yuniar.</div>
                </div>
                <div class="text-center mt-8">
                    <button onclick="showSection('kado')" class="bg-rose-500 text-white font-bold py-2 px-6 rounded-full shadow-md hover:bg-rose-600 transition-colors">
                        Ada kado Online buat kamu! 🎁
                    </button>
                    <p class="text-xs mt-2 italic text-gray-700">yang asli lagi otw! 😅</p>
                </div>
             </div>
        </section>

        <!-- ===== SECTION 4: KADO VIRTUAL ===== -->
        <section id="kado" class="hidden h-screen w-full flex-col justify-center items-center p-4 snap-center">
            <div id="kado-konten" class="glass-card w-full max-w-lg p-6 md:p-8 shadow-xl fade-in text-center">
                <h2 class="font-pacifico text-3xl md:text-4xl text-rose-800 mb-4">Kado Spesial!</h2>
                <p class="text-slate-700 mb-6">Ini mungkin bukan kado mahal, tapi ini tulus dari hati. Klik kadonya untuk membuka!</p>
                
                <div id="gift-box" class="cursor-pointer" onclick="openGift()">
                    <img src="https://placehold.co/200x200/fecdd3/be123c?text=🎁" alt="Kado Tertutup" class="mx-auto w-40 h-40 md:w-48 md:h-48 transition-transform duration-300 hover:scale-110">
                </div>

                <div id="revealed-gift" class="hidden mt-6 text-center">
                     <h3 class="text-2xl font-bold text-slate-800">Kupon Cinta!</h3>
                     <div class="mt-4 border-2 border-dashed border-rose-400 p-4 rounded-lg bg-white/60">
                        <p class="text-slate-700">Kupon ini bisa ditukar dengan:</p>
                        <!-- GANTI ISI KUPON DI SINI -->
                        <p class="text-rose-700 font-bold text-lg mt-2">1x Pelukan Hangat Kapanpun Kamu Butuh</p>
                        <p class="text-xs text-slate-500 mt-2">*Syarat & Ketentuan: berlaku selamanya :)</p>
                     </div>
                     <button onclick="showSection('penutup')" class="mt-8 bg-rose-500 text-white font-bold py-2 px-6 rounded-full shadow-md hover:bg-rose-600 transition-colors">
                        Satu pesan lagi...
                    </button>
                </div>
            </div>
        </section>

        <!-- ===== SECTION 5: PENUTUP (UPDATED) ===== -->
        <section id="penutup" class="hidden h-screen w-full flex-col justify-center items-center p-4 text-center snap-center">
            <div class="glass-card p-6 md:p-10 shadow-xl fade-in w-full max-w-lg">

                <!-- Initial View -->
                <div id="initial-view">
                    <h2 class="font-pacifico text-2xl md:text-3xl text-rose-800">Satu permintaan terakhir...</h2>
                    <p class="text-slate-700 mt-2">Boleh aku liat senyum termanismu sekarang? 😊</p>
                    <button onclick="startCamera()" class="mt-6 bg-white text-rose-600 font-bold py-3 px-8 rounded-full shadow-lg hover:scale-110 transition-transform duration-300">
                        Buka Kamera
                    </button>
                </div>

                <!-- Camera View -->
                <div id="camera-view" class="hidden">
                    <video id="camera-feed" class="w-full max-w-xs mx-auto rounded-lg shadow-lg border-4 border-white" autoplay playsinline></video>
                    <canvas id="photo-canvas" class="hidden"></canvas>
                    <button onclick="capturePhoto()" class="mt-6 bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:scale-105 transition-transform duration-300">
                        Ambil Foto! 📸
                    </button>
                </div>

                <!-- Photo View -->
                <div id="photo-view" class="hidden text-center">
                     <img id="captured-photo" src="" alt="Foto Kamu" class="w-full max-w-xs mx-auto rounded-lg shadow-lg border-4 border-white mb-4">
                     <h1 class="font-pacifico text-3xl md:text-5xl text-rose-800">I Love You!</h1>
                     <!-- GANTI NAMA KAMU DI BAWAH INI -->
                     <p class="mt-2 text-lg text-slate-700">From Lubuk hati ku yang paling dualam,</p>
                     <p class="mt-1 text-xl font-bold text-slate-800">Ferry Agus Pratama</p>
                     <a href="https://wa.me/6282230992554?text=Aaaaw makasih banyak ya sayaaang! ❤️ Kaget ada fotonyaa!" 
                        target="_blank"
                        class="mt-6 inline-block bg-green-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:scale-110 transition-transform duration-300">
                         Balas Pesan Ini
                     </a>
                </div>
                
            </div>
        </section>

    </div>

    <script>
        // Store all section elements and some specific elements
        const sections = document.querySelectorAll('section');
        let stream; // To hold the camera stream

        // Function to show a specific section and scroll to it
        function showSection(sectionId) {
            sections.forEach(section => {
                if (section.id === sectionId) {
                    section.classList.remove('hidden');
                    section.classList.add('flex');
                    section.scrollIntoView({ behavior: 'smooth' });
                } else {
                    section.classList.add('hidden');
                    section.classList.remove('flex');
                }
            });
        }
        
        // Function to open the gift and trigger confetti
        function openGift() {
            document.getElementById('gift-box').classList.add('hidden');
            document.getElementById('revealed-gift').classList.remove('hidden');

            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            function randomInRange(min, max) { return Math.random() * (max - min) + min; }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                
                const particleCount = 50 * (timeLeft / duration);
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });
                confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });
            }, 250);
        }

        // --- NEW FUNCTIONS FOR CAMERA ---

        // Function to start the camera
        async function startCamera() {
            document.getElementById('initial-view').classList.add('hidden');
            document.getElementById('camera-view').classList.remove('hidden');

            const video = document.getElementById('camera-feed');
            try {
                // Request access to the user's camera
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
                video.srcObject = stream;
            } catch (err) {
                console.error("Error accessing camera: ", err);
                // Handle error (e.g., user denied access)
                alert("Oops, kamera tidak bisa diakses. Pastikan kamu mengizinkan akses kamera di browser ya.");
                // Fallback to showing final message
                document.getElementById('camera-view').classList.add('hidden');
                document.getElementById('photo-view').classList.remove('hidden');
                document.getElementById('captured-photo').classList.add('hidden'); // Hide empty image holder
            }
        }

        // Function to capture the photo
        function capturePhoto() {
            const canvas = document.getElementById('photo-canvas');
            const video = document.getElementById('camera-feed');
            const capturedPhoto = document.getElementById('captured-photo');

            // Set canvas dimensions to match video feed
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;

            // Draw the current video frame onto the canvas
            const context = canvas.getContext('2d');
            context.translate(canvas.width, 0);
            context.scale(-1, 1); // Mirror the canvas to un-mirror the photo
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            // Get the image data from the canvas
            const dataUrl = canvas.toDataURL('image/jpeg');
            capturedPhoto.src = dataUrl;

            // Stop the camera stream
            stream.getTracks().forEach(track => track.stop());

            // Switch views
            document.getElementById('camera-view').classList.add('hidden');
            document.getElementById('photo-view').classList.remove('hidden');
        }

    </script>

</body>
</html>
